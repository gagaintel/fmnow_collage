<html ng-app="custom-webapp-ui" lang="en" style="background-color: white">
  <head>
    <!-- Load the Telegram Library -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!--Load the AngularJS Library-->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script>
      //initialize the AngularJS stuff...
      angular.module("custom-webapp-ui", []).controller('CustomUIController', function CustomUIController($scope) {
        // Grid size options
        $scope.gridSizes = [3, 4, 5];

        // Default grid size
        $scope.selectedGridSize = 3;

        // Function to send selected time frame and grid size to the bot
        $scope.sendData = function(timeFrame) {
            window.Telegram.WebApp.requestWriteAccess('ruth');
        };

        // Function to update grid size
        $scope.updateGridSize = function() {
            // No need to send data here, as the grid size change doesn't require sending data to the bot
        };

        // Initialize the button
        const mainButton = window.Telegram.WebApp.MainButton;
        mainButton.text = "Save Preferences";
        mainButton.enable();
        mainButton.show();
        
        // Handle button click to send data to the bot
        mainButton.onClick(function(){
            // Placeholder function for future functionality if needed
        });
      });
    </script>
  </head>
  <body ng-controller="CustomUIController">
    <h2>Grid Size:</h2>
    <input type="range" min="3" max="5" ng-model="selectedGridSize" ng-change="updateGridSize()">
    <span>{{ selectedGridSize }}x{{ selectedGridSize }}</span>

    <h2>Choose a Time Frame:</h2>
    <button ng-click="sendData('1w')">1 Week</button>
    <button ng-click="sendData('1m')">1 Month</button>
    <button ng-click="sendData('1y')">1 Year</button>
    <button ng-click="sendData('overall')">Overall</button>
  </body>
</html>
